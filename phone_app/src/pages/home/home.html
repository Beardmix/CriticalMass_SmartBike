<ion-header>
    <ion-navbar>
        <ion-label (click)="cloudToggle()">Cloud Sync</ion-label>
        <ion-buttons end>
            <ion-toggle [(ngModel)]="isCloud"></ion-toggle>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-grid>
        <ion-row>
            <ion-col>
                <button ion-button block icon-start color="light" (click)="modeChanged('OFF')" [ngStyle]="{'border': isModeSelected('OFF')}"
                    [disabled]="isAuto">
                    <ion-icon color="dark" name="md-power"></ion-icon>Off
                </button>
            </ion-col>
            <ion-col>
                <button ion-button block icon-start color="light" (click)="modeChanged('ON')" [ngStyle]="{'border': isModeSelected('ON')}"
                    [disabled]="isAuto">
                    <ion-icon color="dark" name="md-bulb"></ion-icon>On
                </button>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('FLASH')" [ngStyle]="{'border': isModeSelected('FLASH')}"
                    [disabled]="isAuto">
                    <ion-icon color="danger" name="md-sunny"></ion-icon>Flash
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('PULSE')" [ngStyle]="{'border': isModeSelected('PULSE')}"
                    [disabled]="isAuto">
                    <ion-icon color="secondary" name="md-infinite"></ion-icon>Pulse
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('HUE_FLOW')" [ngStyle]="{'border': isModeSelected('HUE_FLOW')}"
                    [disabled]="isAuto">
                    <ion-icon color="primary" name="md-refresh"></ion-icon>Hue Flow
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('THEATER_CHASE')" [ngStyle]="{'border': isModeSelected('THEATER_CHASE')}"
                    [disabled]="isAuto">
                    <ion-icon color="sunny" name="ios-analytics"></ion-icon>Theater
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('PILE_UP')" [ngStyle]="{'border': isModeSelected('PILE_UP')}"
                    [disabled]="isAuto">
                    <ion-icon color="pink" name="md-barcode"></ion-icon>Pile Up
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('RAINBOW_MODE')" [ngStyle]="{'border': isModeSelected('RAINBOW_MODE')}"
                    [disabled]="isAuto">
                    <ion-icon name="md-color-palette"></ion-icon>Rainbow
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="modeChanged('TRAFFIC_MODE')" [ngStyle]="{'border': isModeSelected('TRAFFIC_MODE')}"
                    [disabled]="isAuto">
                    <ion-icon name="md-car"></ion-icon>Traffic
                </button>
            </ion-col>
            <ion-col col-4>
                <button ion-button block icon-start color="light" (click)="attributeRdmColors()"
                    [disabled]="isAuto">
                    <ion-icon name="md-color-wand"></ion-icon>Magic wand
                </button>
            </ion-col>
        </ion-row>
    </ion-grid>
    <ion-grid>
        <ion-row>
            <ion-col col-6>
                <ion-item>
                    <ion-label (click)="isAuto=!isAuto;automatic()">Automatic
                        <ion-icon color="sunny" name="md-beer"></ion-icon>
                    </ion-label>
                    <ion-toggle [(ngModel)]="isAuto" (ionChange)="automatic()"></ion-toggle>
                </ion-item>
            </ion-col>
            <ion-col col-6>
                <ion-item>
                    <ion-label>Reverse</ion-label>
                    <ion-toggle [(ngModel)]="isReversed" (ionChange)="reverse()"></ion-toggle>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row *ngIf="isAuto">
            <ion-col col-3>
                <ion-badge item-end>change mode every {{ intervalAutomode_s }}s</ion-badge>
            </ion-col>
            <ion-col col-9>
                <ion-range min="1" max="60" debounce="500" [(ngModel)]="intervalAutomode_s">
                    <ion-icon range-left small name="md-time"></ion-icon>
                    <ion-icon range-right name="md-time"></ion-icon>
                </ion-range>
            </ion-col>
        </ion-row>
    </ion-grid>
    <ion-card *ngIf="showTempo()">
        <ion-card-header>
            <ion-grid>
                <ion-row>
                    <ion-col>
                        Tempo
                    </ion-col>
                    <ion-col>
                        <ion-badge item-end (click)="tapTempo()">{{ tempo }}bpm</ion-badge>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-card-header>
        <ion-range id="range-tempo" min="30" max="180" debounce="500" (ionChange)="setTempo()" [(ngModel)]="tempo">
            <ion-icon range-left small name="md-pulse"></ion-icon>
            <ion-icon range-right name="md-pulse"></ion-icon>
        </ion-range>
    </ion-card>
    <ion-card *ngIf="isAuto && showColorPicker()">
        <ion-item [ngStyle]="{'background-color': rgb.getRGBstring()}">
        </ion-item>
    </ion-card>
    <ion-card *ngIf="!isAuto && showColorPicker()">
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-grid>
                        <ion-row>
                            <ion-col col-4 *ngFor="let color of colorsPresetsList">
                                <button ion-button round (click)="setColor(color)" [ngStyle]="{'background-color': color.getRGBstring(), 'border': isColorSelected(color)}">
                                </button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-col>
                <ion-col col-3>
                    <ion-grid>
                        <ion-row>
                            <ion-col>
                                <button ion-button item-right color="light" (click)="setIntensity(100)" [ngStyle]="{'border': isIntensitySelected(100)}">
                                    <img src="assets/icon/baseline_brightness_high_white_18dp.png" style="background: transparent !important;">
                                </button>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col>
                                <button ion-button item-right color="light" (click)="setIntensity(75)" [ngStyle]="{'border': isIntensitySelected(75)}">
                                    <img src="assets/icon/baseline_brightness_medium_white_18dp.png" style="background: transparent !important;">
                                </button>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col>
                                <button ion-button item-right color="light" (click)="setIntensity(25)" [ngStyle]="{'border': isIntensitySelected(25)}">
                                    <img src="assets/icon/baseline_brightness_low_white_18dp.png" style="background: transparent !important;">
                                </button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-card>
</ion-content>