<ion-header>
    <ion-navbar>
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-spinner name="dots" *ngIf="isScanning"></ion-spinner>
                </ion-col>
                <ion-col>
                    <button ion-button icon-left color="light" (click)="connectAll()">
                        <ion-icon name="md-lock"></ion-icon>
                    </button>
                </ion-col>
                <ion-col>
                    <button ion-button icon-left color="light" (click)="disconnectAll()">
                        <ion-icon name="md-unlock"></ion-icon>
                    </button>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-navbar>
</ion-header>

<ion-content>
    <ion-card>
        <ion-title>{{mode.replace("_", " ")}}</ion-title>
        <ion-segment [(ngModel)]="mode" color="dark" (ionChange)="modeChanged($event)">
            <ion-segment-button value="OFF">
                <ion-icon color="dark" name="md-power"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="ON">
                <ion-icon color="dark" name="md-bulb"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="FLASH">
                <ion-icon color="danger" name="md-sunny"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="PULSE">
                <ion-icon color="secondary" name="md-infinite"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="HUE_FLOW">
                <ion-icon color="primary" name="md-refresh"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="THEATER_CHASE">
                <ion-icon color="sunny" name="ios-analytics"></ion-icon>
            </ion-segment-button>
            <ion-segment-button value="PILE_UP">
                <ion-icon color="pink" name="md-barcode"></ion-icon>
            </ion-segment-button>
        </ion-segment>
    </ion-card>
    <!-- First version of the RGB selection. -->
    <!--<ion-card>
        <ion-grid>
            <ion-row>
                <ion-chip id="color-preview" [ngStyle]="{'background-color': hexcolor}">
                </ion-chip>
            </ion-row>
            <ion-row>
                <ion-item>
                    <ion-label stacked>Hue</ion-label>
                    <ion-range min="0" max="360" debounce="500" (ionChange)="setColor()" [(ngModel)]="hue">
                        <ion-icon range-left small name="md-color-palette"></ion-icon>
                        <ion-icon range-right name="md-color-palette"></ion-icon>
                    </ion-range>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item>
                    <ion-label stacked>Brightness</ion-label>
                    <ion-range min="0" max="100" debounce="500" (ionChange)="setColor()" [(ngModel)]="brightness">
                        <ion-icon range-left small name="md-sunny"></ion-icon>
                        <ion-icon range-right name="md-sunny"></ion-icon>
                    </ion-range>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item>
                    <ion-label stacked>Saturation</ion-label>
                    <ion-range min="0" max="100" debounce="500" (ionChange)="setColor()" [(ngModel)]="saturation">
                        <ion-icon range-left small name="md-brush"></ion-icon>
                        <ion-icon range-right name="md-brush"></ion-icon>
                    </ion-range>
                </ion-item>
            </ion-row>
        </ion-grid>
    </ion-card>
    -->
    <!-- Second version of the RGB selection. -->
    <ion-card *ngIf="showColorPicker()">
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-grid>
                        <ion-row>
                            <ion-col col-4 *ngFor="let color of colorsPresetsList">
                                <button ion-button round (click)="setRGB(color.r, color.g, color.b)" [ngStyle]="{'background-color': color.getRGBstring(), 'border': isColorSelected(color)}">
                                </button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-col>
                <ion-col col-3>
                    <ion-grid>
                        <ion-row>
                            <ion-col>
                                <button ion-button icon-start item-right (click)="setBrightness(100)">100%&nbsp;
                                    <ion-icon name="md-sunny"></ion-icon>
                                </button>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col>
                                <button ion-button icon-start item-right (click)="setBrightness(75)">75%&nbsp;&nbsp;
                                    <ion-icon name="md-sunny"></ion-icon>
                                </button>
                            </ion-col>
                        </ion-row>
                        <ion-row>
                            <ion-col>
                                <button ion-button icon-start item-right (click)="setBrightness(25)">25%&nbsp;&nbsp;
                                    <ion-icon name="md-sunny"></ion-icon>
                                </button>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-card>
    <ion-card *ngIf="showTempo()">
        <ion-card-header>
            Tempo
            <ion-badge item-end>{{ tempo }}</ion-badge>
        </ion-card-header>
        <ion-grid>
            <ion-row>
                <ion-col>
                    <ion-range min="30" max="180" debounce="500" (ionChange)="setTempo()" [(ngModel)]="tempo">
                        <ion-icon range-left small name="md-pulse"></ion-icon>
                        <ion-icon range-right name="md-pulse"></ion-icon>
                    </ion-range>
                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-card>
</ion-content>